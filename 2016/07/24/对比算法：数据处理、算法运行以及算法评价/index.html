<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="keywords" content="demon,博客,blog,天津工业大学" />

  
  <title>对比算法：数据处理、算法运行以及算法评价 | Demon&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;写论文免不了要做对比算法，我的天哪（便秘脸～），这一星期就在如此煎熬中度过。感觉这是平生第一次短时间内如此频繁更换编程语言，只能说“程序虐我千百遍，我待程序如初恋”，C/C++、Java、Python、R、Matlab等等，若不是各个算法作者的README文档写得如此亲切，我想我会直接over在实验室的">
<meta property="og:type" content="article">
<meta property="og:title" content="对比算法：数据处理、算法运行以及算法评价">
<meta property="og:url" content="http://blog.demons.top/2016/07/24/对比算法：数据处理、算法运行以及算法评价/index.html">
<meta property="og:site_name" content="Demon's Blog">
<meta property="og:description" content="&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;写论文免不了要做对比算法，我的天哪（便秘脸～），这一星期就在如此煎熬中度过。感觉这是平生第一次短时间内如此频繁更换编程语言，只能说“程序虐我千百遍，我待程序如初恋”，C/C++、Java、Python、R、Matlab等等，若不是各个算法作者的README文档写得如此亲切，我想我会直接over在实验室的">
<meta property="og:image" content="http://blog.demons.top/img/research/dataset.png">
<meta property="og:image" content="http://blog.demons.top/img/research/algorithm.png">
<meta property="og:image" content="http://blog.demons.top/img/research/content.png">
<meta property="og:image" content="http://blog.demons.top/img/research/ap_result.png">
<meta property="og:image" content="http://blog.demons.top/img/research/document.png">
<meta property="og:image" content="http://blog.demons.top/img/research/vocab_1.png">
<meta property="og:image" content="http://blog.demons.top/img/research/vocab_2.png">
<meta property="og:image" content="http://blog.demons.top/img/research/lda_result.png">
<meta property="og:image" content="http://blog.demons.top/img/research/bigclam_input.png">
<meta property="og:image" content="http://blog.demons.top/img/research/bigclam_output.png">
<meta property="og:image" content="http://blog.demons.top/img/research/louvain_output1.png">
<meta property="og:image" content="http://blog.demons.top/img/research/louvain_output2.png">
<meta property="og:image" content="http://blog.demons.top/img/research/infomap_input.png">
<meta property="og:image" content="http://blog.demons.top/img/research/infomap_output_clu.png">
<meta property="og:updated_time" content="2016-07-24T13:48:30.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="对比算法：数据处理、算法运行以及算法评价">
<meta name="twitter:description" content="&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;写论文免不了要做对比算法，我的天哪（便秘脸～），这一星期就在如此煎熬中度过。感觉这是平生第一次短时间内如此频繁更换编程语言，只能说“程序虐我千百遍，我待程序如初恋”，C/C++、Java、Python、R、Matlab等等，若不是各个算法作者的README文档写得如此亲切，我想我会直接over在实验室的">
  
    <link rel="alternative" href="/atom.xml" title="Demon&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
    <script type="text/javascript">
    #申请的百度统计代码
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?07fdd0fccf23e41443da0068d772952b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
<meta name="baidu-site-verification" content="vl8Yt1HVle" />



</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
        <form class="search" method="get" accept-charset="utf-8">
                <label>Search</label>
                <input type="text" id="demon-search-input"
                        class="st-search-input_my" maxlength="30" placeholder="和Demon一起搜一下" />
        </form>
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="img/author.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Demon</a></h1>
		</hgroup>

		
		<p class="header-subtitle">知其然而知其所以然</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags/随笔">随笔</a></li>
				        
							<li><a href="/2015/10/06/实验室/">实验室</a></li>
				        
							<li><a href="/2015/07/29/关于我/">关于我</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="/#" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/AutoEncoder/" style="font-size: 10px;">AutoEncoder</a> <a href="/tags/Community-Detection/" style="font-size: 10px;">Community Detection</a> <a href="/tags/EM算法/" style="font-size: 12.5px;">EM算法</a> <a href="/tags/Eclemma/" style="font-size: 10px;">Eclemma</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Junit/" style="font-size: 10px;">Junit</a> <a href="/tags/K-Means/" style="font-size: 10px;">K-Means</a> <a href="/tags/Network/" style="font-size: 10px;">Network</a> <a href="/tags/QQ/" style="font-size: 10px;">QQ</a> <a href="/tags/Socket/" style="font-size: 10px;">Socket</a> <a href="/tags/TCP/" style="font-size: 10px;">TCP</a> <a href="/tags/Theano/" style="font-size: 10px;">Theano</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/WebDriver/" style="font-size: 10px;">WebDriver</a> <a href="/tags/community-detection/" style="font-size: 10px;">community detection</a> <a href="/tags/deep-learning/" style="font-size: 10px;">deep learning</a> <a href="/tags/flash/" style="font-size: 10px;">flash</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/mysql/" style="font-size: 17.5px;">mysql</a> <a href="/tags/mysql权限管理/" style="font-size: 10px;">mysql权限管理</a> <a href="/tags/paper/" style="font-size: 10px;">paper</a> <a href="/tags/pip/" style="font-size: 10px;">pip</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/selenium/" style="font-size: 10px;">selenium</a> <a href="/tags/software-test/" style="font-size: 12.5px;">software test</a> <a href="/tags/structure-and-content/" style="font-size: 10px;">structure and content</a> <a href="/tags/theano/" style="font-size: 10px;">theano</a> <a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a> <a href="/tags/ubuntu/" style="font-size: 15px;">ubuntu</a> <a href="/tags/virtualbox/" style="font-size: 10px;">virtualbox</a> <a href="/tags/主从同步/" style="font-size: 10px;">主从同步</a> <a href="/tags/关于我/" style="font-size: 10px;">关于我</a> <a href="/tags/备份/" style="font-size: 15px;">备份</a> <a href="/tags/字符画/" style="font-size: 10px;">字符画</a> <a href="/tags/实验室/" style="font-size: 20px;">实验室</a> <a href="/tags/对比算法/" style="font-size: 10px;">对比算法</a> <a href="/tags/机器学习/" style="font-size: 10px;">机器学习</a> <a href="/tags/混合模型/" style="font-size: 10px;">混合模型</a> <a href="/tags/混合高斯/" style="font-size: 10px;">混合高斯</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/聚类/" style="font-size: 10px;">聚类</a> <a href="/tags/错误日志/" style="font-size: 12.5px;">错误日志</a> <a href="/tags/随笔/" style="font-size: 12.5px;">随笔</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">天津大学研究僧，喜欢篮球、旅行。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Demon</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="img/author.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Demon</h1>
			</hgroup>
			
			<p class="header-subtitle">知其然而知其所以然</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
					<li><a href="/2015/10/06/实验室/">实验室</a></li>
		        
					<li><a href="/2015/07/29/关于我/">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="/#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-对比算法：数据处理、算法运行以及算法评价" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/24/对比算法：数据处理、算法运行以及算法评价/" class="article-date">
  	<time datetime="2016-07-24T08:16:05.000Z" itemprop="datePublished">2016-07-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      对比算法：数据处理、算法运行以及算法评价
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/实验室/">实验室</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/对比算法/">对比算法</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;写论文免不了要做对比算法，我的天哪（便秘脸～），这一星期就在如此煎熬中度过。感觉这是平生第一次短时间内如此频繁更换编程语言，只能说“程序虐我千百遍，我待程序如初恋”，C/C++、Java、Python、R、Matlab等等，若不是各个算法作者的README文档写得如此亲切，我想我会直接over在实验室的角落。</p>
<p></p><h1>一、数据处理</h1><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我们实验室手上有挺多数据集的，我们从中选了13个数据集进行实验（实际操作中只用到了11个数据集），数据集的具体情况见下图（表格来自实验室师兄）<p></p>
<center><img src="/img/research/dataset.png" alt="数据集"></center><br>实际数据处理操作：<br>1、原始的边链接信息要处理成邻接矩阵<br>2、拓扑数据删除行全0或者列全0的数据，并同时删除内容数据相应节点，保证数据一致性；<br>   同样内容数据要删除行全0或者列全0数据，并同时删除拓扑数据相应节点<br>3、属性值是TF/IDF形式的数据全部修改为0/1值<br>4、拓扑数据有向的数据需要改成无向数据处理<br>5、ground truth不完全的数据，对没有ground truth的节点，在评价是将label设置为-1<br><br><h1>二、算法运行</h1><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;算法这部分，当前我的工作只做了link和content的部分算法，对于link+content的部分暂没有操作。<br>具体我会处理六个算法，分别是Affinity Propagation(AP)、GibbsLDA、K-Means、infomap、Louvain和BigCLAM。大致一些常用的社团发现对比算法展示如下（表格来自实验室师兄）<br><center><img src="/img/research/algorithm.png" alt="常用对比算法"></center>

<h3 id="Affinity_Propagation（AP算法）">Affinity Propagation（AP算法）</h3><p>1、环境：<br>   — R语言： R语言运行环境RGUI下载地址 <a href="https://cran.r-project.org/bin/windows/base/" target="_blank" rel="external">https://cran.r-project.org/bin/windows/base/</a><br>   — 源码地址： <a href="https://cran.r-project.org/web/packages/apcluster/" target="_blank" rel="external">https://cran.r-project.org/web/packages/apcluster/</a><br>   — 操作系统： Win 7<br>2、安装相关包<br>CRAN（RGUI）的安装我就不多说了，直接说安装相应的依赖包<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; install.packages(<span class="string">"apcluster"</span>)             <span class="comment"># 安装apcluster依赖包</span></span><br><span class="line">&gt; <span class="keyword">library</span>(apcluster)                        <span class="comment"># 载入程序包</span></span><br></pre></td></tr></table></figure></p>
<p>3、运行<br><strong>Input</strong>：R版本的AP算法输入只需要一个原始的内容矩阵即可<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; content &lt;- read.table(path)              <span class="comment"># path部分输入内容矩阵的完整路径即可</span></span><br><span class="line">&gt; s &lt;- negDistMat(content, r=<span class="number">2</span>)            <span class="comment"># 计算相似矩阵</span></span><br><span class="line">&gt; result &lt;- apcluster(s)                   <span class="comment"># 计算结果</span></span><br><span class="line">&gt; result                                   <span class="comment"># 打印结果</span></span><br></pre></td></tr></table></figure></p>
<p>【备注】内容矩阵如下，每一行表示一个节点，每一列表示一个内容属性</p>
<center><img src="/img/research/content.png" alt="内容矩阵"></center>

<p><strong>Output</strong>：<br>AP算法执行结束以后，它的格式是：每个类都对应所有属于这个类的节点的index，如下图所示：</p>
<center><img src="/img/research/ap_result.png" alt="AP算法结果"></center>

<p>4、评价<br>然而，正如上面所看到的，AP算法的输出的结果，并不能直接用来计算NMI等评价准则，那我们需要将这个转换为一行或者一列label的形式，方便后面评价计算。这里具体的评价方法，放到最后讲，这里只是要讨论的是AP算法输出结果如何转换到我们想要的结果，编写Matlab代码如下：<br><strong>evaluate_process.m</strong><br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">labels_result</span>=<span class="title">evaluate_process</span><span class="params">(path, file_name, n)</span>    </span></span><br><span class="line">    fin=fopen(path, <span class="string">'r'</span>); </span><br><span class="line">    class_num = <span class="number">1</span>;</span><br><span class="line">    result_arr = -<span class="built_in">ones</span>(<span class="number">1</span>,n);     <span class="comment">% 初始化全为-1</span></span><br><span class="line">    <span class="keyword">while</span> ~feof(fin)             <span class="comment">% 是不是文件末尾</span></span><br><span class="line">        strline=fgetl(fin);</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isempty</span>(strline)      <span class="comment">% 判断是不是空行</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="built_in">disp</span>(strline);</span><br><span class="line">        S = regexp(strline, <span class="string">'\s+'</span>, <span class="string">'split'</span>);</span><br><span class="line">        numline = str2num(char(S));</span><br><span class="line">        numline(<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">size</span> = <span class="built_in">length</span>(numline);</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="built_in">size</span></span><br><span class="line">            result_arr(numline(<span class="built_in">i</span>)) = class_num;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        class_num = class_num + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    fclose(fin);</span><br><span class="line">    save(file_name, <span class="string">'result_arr'</span>)</span><br><span class="line">    labels_result = result_arr;</span><br></pre></td></tr></table></figure></p>
<h3 id="LDA算法">LDA算法</h3><p>1、环境<br>   — R语言： R语言运行环境RGUI下载地址 <a href="https://cran.r-project.org/bin/windows/base/" target="_blank" rel="external">https://cran.r-project.org/bin/windows/base/</a><br>   — 源码地址（R版本）： <a href="https://cran.r-project.org/web/packages/lda/" target="_blank" rel="external">https://cran.r-project.org/web/packages/lda/</a><br>   — 操作系统： Win 7<br>   — 推荐Blei的网页： <a href="http://www.cs.princeton.edu/~blei/topicmodeling.html" target="_blank" rel="external">http://www.cs.princeton.edu/~blei/topicmodeling.html</a><br>2、安装运行<br>之所以之前找的是R版本的，主要原因是因为其他版本的我运行出来结果都是words和topic的关系，并不是我们想要的document和topic的关系。（这些概念如果不太清楚，建议可以看下<br>LDA的论文，挺有意思的）<br><strong>lda包的安装</strong>：<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; install.packages(<span class="string">"lda"</span>)</span><br><span class="line">&gt; <span class="keyword">library</span>(<span class="string">"lda"</span>)</span><br></pre></td></tr></table></figure></p>
<p><strong>Input</strong>：最主要的输入应该是document和vocabulary两个参数。<br>【document格式】<br>第一列代表的是document的index，之后的所有列A:B，代表的含义是A表示在vocab.txt中的index-1，B代表在document中出现的个数，因为我们做实验用的都是0-1，所以出现过的总是1,（你如果用的是count计数的，你可以将B这部分写成个数）</p>
<center><img src="/img/research/document.png" alt="document参数的输入格式"></center><br>【vocabulary格式】<br>格式就是一列，代表所有的词汇，相当于一个语料库。因为我们这里直接用的是index做词汇，所以只用了标号（方式一），如果你要用真正的词汇也是可以的（方式二）<br>方式一：<br><center><img src="/img/research/vocab_1.png" alt="vocabulary参数的输入格式index形式"></center><br>方式二：<br><center><img src="/img/research/vocab_2.png" alt="vocabulary参数的输入格式词汇形式"></center>

<p><strong>Output</strong>：如图所示</p>
<center><img src="/img/research/lda_result.png" alt="lda输出"></center>

<p><strong>具体运行</strong>：<br>具体操作（RGUI操作环境）：<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; documents &lt;- read.documents(<span class="string">'F:/Research/uai2010_document.txt'</span>)</span><br><span class="line">&gt; vocab &lt;- read.vocab(<span class="string">'F:/Research/uai2010_vocab.txt'</span>)</span><br><span class="line">&gt; result &lt;- lda.collapsed.gibbs.sampler(documents, <span class="number">6</span>, vocab, <span class="number">25</span>, <span class="number">0.1</span>, <span class="number">0.1</span>) </span><br><span class="line">&gt; result$document_sums</span><br><span class="line">&gt; <span class="keyword">source</span>(<span class="string">'F:/Research/algorithms_comparison/data/data_processed/LDA/result_to_labels.R'</span>)</span><br><span class="line">&gt; f(<span class="number">3067</span>,<span class="string">"LDA_uai2010.txt"</span>)</span><br></pre></td></tr></table></figure></p>
<p>同样，LDA算法的输出，也是不符合的，我们要写个R语言脚本转换下。<br>result_to_labels.R脚本代码如下：<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">f &lt;- <span class="keyword">function</span>(n, filename) &#123;</span><br><span class="line">    s &lt;- <span class="string">""</span></span><br><span class="line">    path &lt;- paste(<span class="string">"F:/Research/algorithms_comparison/data/data_processed/LDA/output/"</span>, filename, sep=<span class="string">""</span>)</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:n) &#123;</span><br><span class="line">        s &lt;- paste(s,order(result$document_sums[,i],decreasing=<span class="literal">TRUE</span>)[<span class="number">1</span>],sep=<span class="string">" "</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    print(s)</span><br><span class="line"></span><br><span class="line">    write.table(s,file=path)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="BigCLAM算法">BigCLAM算法</h3><p>1、环境<br>   — 源码下载地址： <a href="http://snap.stanford.edu/snap/download.html" target="_blank" rel="external">http://snap.stanford.edu/snap/download.html</a><br>      备注：这个大文件夹貌似是斯坦福的大牛们的代码集合，好强大<br>   — 语言：C/C++<br>   — 操作系统：Ubuntu 14.04<br>2、编译运行<br>炒鸡简单～～～<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ make</span><br><span class="line"> sudo ./bigclam</span><br></pre></td></tr></table></figure></p>
<p>看上去如此简单，即兴奋又难过，难道不需要输入吗，输出又是啥呢？<br><strong>Input</strong>：as20graph.txt，就是边的连接数据（咱们原始数据就这样的，处理都不需要，so easy）</p>
<center><img src="/img/research/bigclam_input.png" alt="bigclam输入格式"></center><br><strong>Output</strong>：cmtyvv.txt，这个文件转成想要的label list格式就好了<br><center><img src="/img/research/bigclam_output.png" alt="bigclam输出格式"></center>

<p>不用惊讶，这个算法就这样简单搞定～～  太TM简单了！</p>
<h3 id="Louvain算法">Louvain算法</h3><p>1、环境<br>   — 语言：Matlab<br>   — 操作系统：Win 7<br>   — 源码地址： <a href="http://download.csdn.net/detail/software_gemeng/9584950" target="_blank" rel="external">http://download.csdn.net/detail/software_gemeng/9584950</a><br>      （备注：我忘记链接了，所以就直接将源码包放在CSDN上供大家下载了）<br>2、运行<br>主要函数是cluster_jl(M,s,self,debug,verbose)，首先明确下输入输出：</p>
<p><strong>Input</strong>:<br>— <strong>M</strong> : weight matrix (the matrix is symetrized with the sum of weights in both directions)<br>— <strong>s</strong> : 1 = Recursive computation, 0 = Just one level computation<br>— <strong>self</strong> : 1 = Use self weights, 0 = Do not use self weights<br>— <strong>debug</strong>   : 1 = outputs some debug messages<br>— <strong>verbose</strong> : 1 = outputs some messages</p>
<p><strong>Output</strong> :<br>  COMTY, structure with the following information<br>  for each level i :<br>    COMTY.COM{i} : vector of community IDs (sorted by community sizes)<br>    COMTY.SIZE{i} : vector of community sizes<br>    COMTY.MOD(i) : modularity of clustering<br>    COMTY.Niter(i) : Number of iteration before convergence</p>
<p>实际运行过程中，其实s,self,debug,verbose等参数都是有默认值的，所以我们只要M就行<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cluster_ji(M)</span><br></pre></td></tr></table></figure></p>
<p>对于输出的结果，是一个COMTY对象，它会根据循环最后收敛到一个结果，它每次迭代都会保存结果，我们就拿最后结果就行，即是拿COMTY.COM{i}最后一个cell里面的值就行。因为它收敛时，会比较和前一次迭代的结果，如果相同就不再继续迭代了，所以会发现结果中，最后一个和倒数第二次迭代结果总是一样的。</p>
<center><img src="/img/research/louvain_output1.png" alt="Louvain输出结果"></center><br><center><img src="/img/research/louvain_output2.png" alt="Louvain输出结果"></center>

<h3 id="Infomap算法">Infomap算法</h3><p>1、环境<br>   — 语言：C/C++<br>   — 操作系统：Ubuntu 14.04<br>   — 源码地址： <a href="http://www.mapequation.org/code.html" target="_blank" rel="external">http://www.mapequation.org/code.html</a><br>2、编译运行<br>进入下载的Info马屁源码目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ unzip Infomap.zip</span><br><span class="line">$ <span class="built_in">cd</span> Infomap</span><br><span class="line">$ make</span><br></pre></td></tr></table></figure></p>
<p>参数的话，直接运行 ./Infomap —help查看参数<br>实际运行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir output</span><br><span class="line">$ ./Infomap ninetriangles.net output/ -N <span class="number">10</span> --directed --two-level --clu --map</span><br></pre></td></tr></table></figure></p>
<p>上面是尝试下人家的例子能不能运行，输出结果都在output目录下，所以尝试过了例子之后，来分析下输入和输出。<br><strong>Input</strong>:<br>几个重要参数<br>&nbsp;&nbsp;&nbsp;&nbsp;-N 10表示运行十次<br>&nbsp;&nbsp;&nbsp;&nbsp;—directed表示有向的形式<br>&nbsp;&nbsp;&nbsp;&nbsp;—clu表示输出clu格式的结果<br>&nbsp;&nbsp;&nbsp;&nbsp;—map表示输出map格式的结果<br>&nbsp;&nbsp;&nbsp;&nbsp;—two-level表示“Optimize a two-level partition of the network”</p>
<p><center><img src="/img/research/infomap_input.png" alt="Infomap输入格式示例"></center><br><strong>Output</strong>:下面呈现的是clu格式的输出（我们用的是这个）<br>其中的输出解释一下，例如3 1 0.0384615表示第3个结点属于第1个社团，最后的小数是Infomap的一个评价指标算出的结果，对我们暂时没啥用</p>
<p><center><img src="/img/research/infomap_output_clu.png" alt="Infomap输出格式示例"></center><br>用自己的数据运行如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./Infomap cite.txt output/ -N <span class="number">10</span> --undirected --two-level --clu</span><br></pre></td></tr></table></figure></p>
<p></p><h1>三、结果评价</h1><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;搞定了前面的算法之后，我们就能得到相应的分类结果，但是这个分类结果效果如何，就需要对这些结果用一些标准来做评价。<br>我们现在有5个评价标准：<br>（1）NMI<br>（2）Accuracy<br>（3）Fscore<br>（4）Jaccard<br>（5）GNMI<br>对于重叠发现算法和非重叠发现算法，应用的评价不太相同<p></p>
<table>
<thead>
<tr>
<th style="text-align:center">类别</th>
<th style="text-align:center">评价</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">重叠</td>
<td style="text-align:center">3,4,5</td>
</tr>
<tr>
<td style="text-align:center">非重叠</td>
<td style="text-align:center">1,2,3,4,5</td>
</tr>
</tbody>
</table>
<p>具体5个评价的实现代码分享到了百度云，可直接下载：<a href="http://pan.baidu.com/s/1cvBZvo" target="_blank" rel="external">http://pan.baidu.com/s/1cvBZvo</a></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/07/08/用Python来制作字符画/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">用Python来制作字符画</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="对比算法：数据处理、算法运行以及算法评价" data-title="对比算法：数据处理、算法运行以及算法评价" data-url="http://blog.demons.top/2016/07/24/对比算法：数据处理、算法运行以及算法评价/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Demon
    	</div>
      	<div class="footer-right">
<!--
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
-->
            简单不先于复杂，而在复杂之后   
   	</div>
    </div>
    <script type="text/javascript">
      (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
      })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

      _st('install','UynJht7T_EcyDZm3PnxB','2.0.0');
    </script>
  </div>
</footer>

    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>